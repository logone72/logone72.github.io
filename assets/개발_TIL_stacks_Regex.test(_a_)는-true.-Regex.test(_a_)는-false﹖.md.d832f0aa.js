import{_ as s,c as e,o as a,N as o}from"./chunks/framework.67628f14.js";const F=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":3,"title":"출처","slug":"출처","link":"#출처","children":[]}],"relativePath":"개발/TIL/stacks/Regex.test(\\"a\\")는-true.-Regex.test(\\"a\\")는-false﹖.md"}'),n={name:'개발/TIL/stacks/Regex.test("a")는-true.-Regex.test("a")는-false﹖.md'},l=o(`<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> regex </span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">e</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">g</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">regex</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">test</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">e</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// true</span></span>
<span class="line"><span style="color:#A6ACCD;">regex</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">test</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">e</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// false</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;&gt;&gt;</span><span style="color:#A6ACCD;"> wow</span><span style="color:#89DDFF;">!</span></span>
<span class="line"></span></code></pre></div><p>버그 픽스 작업을 하는 도중 매우 기이한 현상을 발견하게 되었다. <strong>동일한 input을 넣었는데 다른 output이 나온다니??</strong></p><p>위와 같은 일반적이지 않은 __현상의 원인는 바로 <code>g</code> 플래그__였다.</p><blockquote><p>g 플래그란? g flag는 &quot;전역(global)&quot; 플래그를 나타냅니다. 이 플래그는 정규 표현식에서 일치하는 모든 문자열을 대상으로 검색을 계속하도록 지시합니다. 일치하는 첫 번째 문자열을 찾은 후에도 검색을 중단하지 않고 계속해서 다음 일치하는 문자열을 찾습니다.</p></blockquote><p><code>String.prototype.match()</code>에서는 정규 표현식에 g 플래그가 주어지면, 패턴과 일치하는 모든 것을 담은 배열을 반환한다.</p><p>이와 같은 동작이 <code>RegExp.prototype.test()</code> 혹은 <code>exec()</code>에도 적용되는데, <code>test()</code>와 <code>exec()</code> 메소드는 내부적으로 <code>RegExp: lastIndex</code> 부터 주어진 문자열을 검사한다.</p><p>기본적으로 0으로 설정되어있는데, <code>g</code> 플래그(혹은 <code>y</code> 플래그)가 주어진 경우 값이 자동적으로 변동될 수 있게 된다.</p><p><code>test()</code>와 <code>exec()</code> 메소드가 수행되면서 패턴을 충족하는 <code>match</code>를 찾을 때, 해당 문자열 다음 <code>index</code>로 <code>lastIndex</code>가 변경된다.</p><p>만약 <code>test()</code>와 <code>exec()</code> 가 <code>match</code>를 찾지 못한 경우, 다시 0로 세팅된다.</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> regex </span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">e</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">g</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">regex</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">lastIndex  </span><span style="color:#676E95;font-style:italic;">// 0</span></span>
<span class="line"><span style="color:#A6ACCD;">regex</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">test</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">e</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// true</span></span>
<span class="line"><span style="color:#A6ACCD;">regex</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">lastIndex  </span><span style="color:#676E95;font-style:italic;">// 1</span></span>
<span class="line"><span style="color:#A6ACCD;">regex</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">test</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">e</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// false</span></span>
<span class="line"><span style="color:#A6ACCD;">regex</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">lastIndex  </span><span style="color:#676E95;font-style:italic;">// 0</span></span>
<span class="line"><span style="color:#A6ACCD;">regex</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">test</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">e</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// true</span></span>
<span class="line"></span></code></pre></div><p>동일한 <code>RegExp</code>를 참조하여 <code>test()</code> 를 진행하는 경우에 발생할 수 있고, 직관적이지 않은 동작 원리이기에 인지하지 못한다면 나처럼... 원인을 찾는데 고생 할 수도 있다.</p><h3 id="출처" tabindex="-1">출처 <a class="header-anchor" href="#출처" aria-hidden="true">#</a></h3><p><a href="https://stackoverflow.com/questions/28910934/why-does-regex-test-changes-the-result-in-subsequent-calls" target="_blank" rel="noreferrer">https://stackoverflow.com/questions/28910934/why-does-regex-test-changes-the-result-in-subsequent-calls</a><a href="https://stackoverflow.com/questions/1520800/why-does-a-regexp-with-global-flag-give-wrong-results" target="_blank" rel="noreferrer">https://stackoverflow.com/questions/1520800/why-does-a-regexp-with-global-flag-give-wrong-results</a><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/lastIndex" target="_blank" rel="noreferrer">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/lastIndex</a></p>`,13),t=[l];function p(c,r,y,D,d,i){return a(),e("div",null,t)}const A=s(n,[["render",p]]);export{F as __pageData,A as default};
